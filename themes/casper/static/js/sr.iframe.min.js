Paperli=window.Paperli||{},Paperli.FRAME_NUMBER=Paperli.FRAME_NUMBER||0,Paperli.PaperFrame=function(){function e(e){var t=0,a=0;if(e.offsetParent)do{t+=e.offsetLeft,a+=e.offsetTop}while(e=e.offsetParent);return{left:t,top:a}}function t(e,t,a){var n;return function(){var r=this,i=arguments,o=function(){n=null,a||e.apply(r,i)},s=a&&!n;clearTimeout(n),n=setTimeout(o,t),s&&e.apply(r,i)}}var a,n,r,i=1,o=this;return{Show:function(a){var n,r=(a.protocol||o.location.protocol)+"//"+(a.domain||"paper.li"),i="sr-paper-frame-"+ ++Paperli.FRAME_NUMBER,s=["ifrm=true","loc="+encodeURIComponent(document.location.href)];a.lang&&s.push("lang="+a.lang),a.pid&&(a.sid&&s.push("share_id="+a.sid),a.unsubscribe&&s.push("unsubscribe="+a.unsubscribe));var p=src=r+(a.pid?"/~/papers/"+a.pid:"")+"?"+s.join("&");a.ga&&"undefined"!=typeof _gaq&&(_gaq.push(function(){var e=_gat._getTrackerByName();document.getElementById(i).src=e._getLinkerUrl(src)}),p="about:blank"),document.write('<iframe id="'+i+'" src="'+p+'" width="100%" height="800" scrolling="no" frameBorder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" style="width:1px;min-width:100%;*width:100%;"></iframe>'),Paperli.PaperFrame.ReceiveMessage(function(t){var a=t&&t.data;if(a&&"string"==typeof a&&-1!=a.indexOf("if_height")){var r=JSON.parse(a);"paper_iframe"==r.type&&(r=r.data);var s=r.if_height,p=r.scroll,c=document.getElementById(i);if(!isNaN(s)&&s>=0&&s!==n&&(c.height=n=s),p&&"top"==p){var l=e(c);o.scrollTo(0,l.top)}}},r),o.onload=o.onscroll=t(function(t){var n=document.getElementById(i),r=o.pageYOffset,s=o.innerHeight-(a.padding_bottom||0),p=e(n);if("about:blank"!=n.src){var c={if_pageY:r,if_innerHeight:s,if_offsetTop:p.top};Paperli.PaperFrame.PostMessage(JSON.stringify(c),src,n.contentWindow),Paperli.PaperFrame.PostMessage(JSON.stringify({data:c,type:"paper_iframe"}),src,n.contentWindow)}},1e3)},PostMessage:function(e,t,a){t&&(a=a||parent,o.postMessage?a.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(a.location=t.replace(/#.*$/,"")+"#"+ +new Date+i+++"&"+e))},ReceiveMessage:function(e,t){o.postMessage?(e&&(r=function(a){if("string"==typeof t&&a.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(a.origin))return!1;e(a)}),o.addEventListener?o[e?"addEventListener":"removeEventListener"]("message",r,!1):o[e?"attachEvent":"detachEvent"]("onmessage",r)):(a&&clearInterval(a),a=null,e&&(a=setInterval(function(){var t=document.location.hash,a=/^#?\d+&/;t!==n&&a.test(t)&&(n=t,e({data:t.replace(a,"")}))},100)))}}}();